{% extends 'base.html.twig' %}

{% block title %}
	Payer votre commande
{%  endblock  %}

{% block body %}

<style>
	h1{
		margin-bottom: 50px;
	}

	#submit {
		margin: 25px auto 0 auto;
		display: block;
		
	}

</style>


	<h1 class="text-center">Payer votre commande</h1>

	<div class="container w-50">
		<form id="payment-form">
			<div id="card-element"><!--Stripe.js injects the Card Element--></div>

			<button id="submit" class="btn btn-success text-center">
				<div class="spinner hidden" id="spinner"></div>
				<span id="button-text">Payer avec stripe</span>
			</button>
			<p id="card-error" role="alert"></p>
		</form>
	</div>
	
{%  endblock  %}


{% block javascripts %}
	{{ parent() }}
	<script src="https://js.stripe.com/v3/"></script>

	<script>
		const clientSecret = '{{ clientSecret }}'
		const stripePublicKey = ' {{ stripePublicKey }}';
		const redirectAfterSuccessUrl = "{{ url('purchase_payment_success', {'id': purchase.id}) }}";
	</script>
	<script src="/js/payment.js">
	
	</script>


{%  endblock  %}
